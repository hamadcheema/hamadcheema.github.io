<!DOCTYPE html>
<html>
<head>
  <title>Chat</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut, updateEmail, updatePassword } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    document.addEventListener("DOMContentLoaded", () => {
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          window.location.href = "login.html";
        } else {
          document.getElementById("welcome").innerText = "Welcome, " + (user.displayName || user.email);
        }
      });

      document.getElementById("logoutBtn").addEventListener("click", async () => {
        await signOut(auth);
      });

      document.getElementById("changeEmailBtn").addEventListener("click", async () => {
        const newEmail = prompt("Enter new email:");
        if (newEmail) {
          try {
            await updateEmail(auth.currentUser, newEmail);
            alert("✅ Email updated successfully!");
          } catch (err) {
            alert("❌ " + err.message);
          }
        }
      });

      document.getElementById("changePasswordBtn").addEventListener("click", async () => {
        const newPass = prompt("Enter new password:");
        if (newPass) {
          try {
            await updatePassword(auth.currentUser, newPass);
            alert("✅ Password updated successfully!");
          } catch (err) {
            alert("❌ " + err.message);
          }
        }
      });
    });
  </script>
</head>
<body>
  <h2 id="welcome">Welcome</h2>
  <button id="logoutBtn">Logout</button>
  <button id="changeEmailBtn">Change Email</button>
  <button id="changePasswordBtn">Change Password</button>

  <h3>Chat (placeholder)</h3>
  <p>⚡ Yahan par aap chat system connect kar sakte ho (Realtime DB / Firestore).</p>
</body>
</html>
