*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{background:#f4f4f9;color:#333;}
button{cursor:pointer;outline:none;}
.container{max-width:900px;margin:0 auto;background:#fff;border-radius:12px;box-shadow:0 8px 26px rgba(0,0,0,0.1);display:flex;flex-direction:column;height:100vh;overflow:hidden;}
.header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:#667eea;color:#fff;position:relative;border-radius:12px 12px 0 0;}
.header h2{font-size:20px;}
.menu-btn{font-size:24px;}
.menu-panel{position:absolute;top:50px;right:20px;background:#fff;border-radius:8px;display:none;flex-direction:column;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.menu-panel button{padding:10px 20px;border:none;text-align:left;background:#fff;}
.menu-panel button:hover{background:#f0f0f0;}
#messages{flex:1;overflow-y:auto;padding:12px;background:#fafbfd;}
.msg-row{display:flex;gap:10px;margin-bottom:12px;align-items:flex-start;opacity:0;transform:translateX(-20px);transition:0.3s;}
.msg-row.self{justify-content:flex-end;}
.msg-row.slide-in{opacity:1;transform:translateX(0);}
.avatar{width:38px;height:38px;border-radius:50%;object-fit:cover;}
.bubble{background:#fff;padding:10px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.03);max-width:70%;}
.meta{font-weight:700;color:#042a57;margin-bottom:4px;font-size:13px;}
.time{font-weight:400;color:#666;font-size:11px;margin-left:8px;}
.chat-img{max-width:220px;border-radius:8px;display:block;margin-top:6px;cursor:pointer;}
.controls{display:flex;gap:6px;align-items:center;padding:8px;background:#fff;border-top:1px solid #ddd;}
#msgInput{flex:1;padding:12px;border-radius:20px;border:1px solid #ddd;font-size:14px;}
#sendBtn,#imgBtn{padding:10px 16px;border-radius:20px;border:none;background:#667eea;color:#fff;font-weight:600;font-size:14px;}
#sendBtn:hover,#imgBtn:hover{opacity:0.9;}
.preview{margin:6px 10px;}
.preview img{max-width:100px;border-radius:8px;display:block;margin-bottom:4px;}
.reply-preview{background:#f0f0f0;padding:6px 10px;border-left:4px solid #667eea;margin:0 10px 6px 10px;border-radius:6px;display:flex;justify-content:space-between;align-items:center;font-size:14px;}
.reply-preview span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.reply-preview button{background:none;border:none;font-size:16px;cursor:pointer;}
.reactions{margin-top:6px;display:flex;gap:6px;align-items:center;flex-wrap:wrap;}
.reaction-btn{padding:4px 8px;border-radius:14px;background:#f6f6f6;cursor:pointer;font-size:12px;transition:0.2s;}
.reaction-btn.you{background:#dfeffd;}
